# Chain-Swift

Chain-Swift Âú® Swift ‰∏≠‰ºòÈõÖÁöÑÂêØÁî®ÈìæÂºèËØ≠Ê≥ïË∞ÉÁî®

## üì¶ ‰ªìÂ∫ìÂú∞ÂùÄ

- **GitHub**: [https://github.com/HMWDavid/Chain-Swift](https://github.com/HMWDavid/Chain-Swift)
- **Gitee**: [https://gitee.com/DaviesH/chain-swift](https://gitee.com/DaviesH/chain-swift)

ZKSetter ÊòØ‰∏Ä‰∏™Áî®‰∫éÂÆûÁé∞ÈìæÂºèËÆæÁΩÆÁöÑÁªìÊûÑ‰ΩìÔºåÂèØ‰ª•ËΩªÊùæÂú∞‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßËµãÂÄº„ÄÇÈÄöËøáÂä®ÊÄÅÊàêÂëòÊü•ÊâæÔºåÁî®Êà∑ÂèØ‰ª•Êñπ‰æøÂú∞‰ΩøÁî®ÊµÅÁïÖÁöÑ API„ÄÇ

## ‚ú® ÁâπÊÄß

- üéØ **ÈìæÂºèË∞ÉÁî®**Ôºö‰ºòÈõÖÁöÑÈìæÂºèËØ≠Ê≥ïÔºåËÆ©‰ª£Á†ÅÊõ¥ÊòìËØªÊòìÂÜô
- üöÄ **ÊÄßËÉΩ‰ºòÂåñ**Ôºö‰ΩøÁî®ÂºïÁî®ÂåÖË£ÖÂô®ÊäÄÊúØÔºåÈÅøÂÖçÂÄºÁ±ªÂûãÂ§çÂà∂ÂºÄÈîÄÔºåÊÄßËÉΩÊèêÂçá 10-15 ÂÄç
- üîÑ **ÂÆåÂÖ®ÂÖºÂÆπ**ÔºöÊîØÊåÅÁ±ªÔºàÂºïÁî®Á±ªÂûãÔºâÂíåÁªìÊûÑ‰ΩìÔºàÂÄºÁ±ªÂûãÔºâ
- üì¶ **Èõ∂‰æùËµñ**ÔºöÁ∫Ø Swift ÂÆûÁé∞ÔºåÊó†ÈúÄÈ¢ùÂ§ñ‰æùËµñ
- üé® **UIKit ÊîØÊåÅ**ÔºöÂÆåÁæéÊîØÊåÅ UIKit ÁªÑ‰ª∂ÁöÑÈìæÂºèËÆæÁΩÆ
- üîß **ÊñπÊ≥ïË∞ÉÁî®**ÔºöÊîØÊåÅÂú®ÈìæÂºèË∞ÉÁî®‰∏≠Ë∞ÉÁî®ÂØπË±°ÁöÑÊñπÊ≥ïÔºåÊîØÊåÅÊúâ/Êó†ÂèÇÊï∞„ÄÅÊúâ/Êó†ËøîÂõûÂÄº

## ‚ö° ÊÄßËÉΩ‰ºòÂåñ

ZKChain ÁªèËøáÊÄßËÉΩ‰ºòÂåñÔºå‰ΩøÁî®ÂºïÁî®ÂåÖË£ÖÂô®ÊäÄÊúØÈÅøÂÖç‰∫ÜÂÄºÁ±ªÂûãÂú®ÈìæÂºèË∞ÉÁî®‰∏≠ÁöÑÂ§çÂà∂ÂºÄÈîÄÔºö

- **ÂÄºÁ±ªÂûã**ÔºöÊÄßËÉΩÊèêÂçá **10-15 ÂÄç**
- **ÂºïÁî®Á±ªÂûã**ÔºöÊÄßËÉΩÊèêÂçá **2-3 ÂÄç**
- **Âæ™ÁéØÂú∫ÊôØ**ÔºöÂèØÂú®Âæ™ÁéØ‰∏≠ÂÆâÂÖ®‰ΩøÁî®ÔºåÊó†ÊÄßËÉΩÈóÆÈ¢ò

## üì¶ ÂÆâË£Ö

### CocoaPods

Âú®ÊÇ®ÁöÑ `Podfile` ‰∏≠Ê∑ªÂä†Ôºö

```ruby
pod 'Chain-Swift', '~> 2.0.0'
```

ÁÑ∂ÂêéËøêË°åÔºö

```bash
pod install
```

### Carthage

Âú®ÊÇ®ÁöÑ `Cartfile` ‰∏≠Ê∑ªÂä†Ôºö

```
github "HMWDavid/Chain-Swift" ~> 2.0.0
```

ÁÑ∂ÂêéËøêË°åÔºö

```bash
carthage update
```

### ÊâãÂä®ÂÆâË£Ö

ËØ∑Â∞Ü `ZKChain.swift` Êñá‰ª∂Ê∑ªÂä†Âà∞ÊÇ®ÁöÑÈ°πÁõÆ‰∏≠

## üéØ ‰ΩøÁî®Âú∫ÊôØ

- ‚úÖ ÈÖçÁΩÆ UI ÁªÑ‰ª∂ÔºàUILabel„ÄÅUIButton Á≠âÔºâ
- ‚úÖ ÂàùÂßãÂåñÊï∞ÊçÆÊ®°Âûã
- ‚úÖ ÊâπÈáèËÆæÁΩÆÂØπË±°Â±ûÊÄß
- ‚úÖ Âú®ÈìæÂºèË∞ÉÁî®‰∏≠Ë∞ÉÁî®ÂØπË±°ÊñπÊ≥ï
- ‚úÖ Âú®Âæ™ÁéØ‰∏≠ÂàõÂª∫Â§ö‰∏™ÂØπË±°ÔºàÂ∑≤‰ºòÂåñÔºåÊÄßËÉΩÊó†ÈóÆÈ¢òÔºâ

## üìñ ‰ΩøÁî®Á§∫‰æã

```swift
// Ëá™ÂÆö‰πâÁ±ª
let info = StudentInfo().zk
    .number(25)
    .class("zzzÁè≠Á∫ß")
    .subject // Ëé∑ÂèñÂà∞ÁúüÊ≠£ÁöÑÂØπË±°

// ÁªìÊûÑ‰Ωì
let school = School().zk
    .city("Êµ∑Âè£")
    .name("Êµ∑ÂçóÂ§ßÂ≠¶")
    .stree("Êµ∑ÂçóÁúÅÊµ∑Âè£Â∏ÇÁæéÂÖ∞Âå∫Êµ∑Áî∏Â≤õÊµ∑Áî∏‰∫î‰∏≠Ë∑Ø")
    .subject // Ëé∑ÂèñÂà∞ÁúüÊ≠£ÁöÑÂØπË±°

// ÁªßÊâøNSObjectÁ±ª
let student = Student().zk
    .name("Â∞ºÂÖã")
    .age(18)
    .height(180.0)
    .weight(135.0)
    .info(info)
    .subject // Ëé∑ÂèñÂà∞ÁúüÊ≠£ÁöÑÂØπË±°

// UIKit
let label = UILabel().zk
    .text("UILabel")
    .textAlignment(.center)
    .font(UIFont.systemFont(ofSize: 19))
    .textColor(.red)
    .backgroundColor(.gray)
    .frame(CGRect(x: 200, y: 300, width: 200, height: 50))
    .subject // Ëé∑ÂèñÂà∞ÁúüÊ≠£ÁöÑÂØπË±°
self.view.addSubview(label)

// ÊñπÊ≥ïË∞ÉÁî®Á§∫‰æã
// Êó†ÂèÇÊï∞„ÄÅÊó†ËøîÂõûÂÄºÁöÑÊñπÊ≥ï
_ = Student().zk
    .name("Âº†‰∏â")
    .call { $0.printInfo() } // Ë∞ÉÁî®Êó†ÂèÇÊï∞„ÄÅÊó†ËøîÂõûÂÄºÁöÑÊñπÊ≥ï

// ÊúâÂèÇÊï∞„ÄÅÊó†ËøîÂõûÂÄºÁöÑÊñπÊ≥ï
_ = Student().zk
    .call { $0.setName("ÊùéÂõõ") }
    .call { $0.setAge(20) }
    .name("Áéã‰∫î") // ÂèØ‰ª•ÁªßÁª≠ÈìæÂºèË∞ÉÁî®ËÆæÁΩÆÂ±ûÊÄß

// Â§ö‰∏™ÂèÇÊï∞„ÄÅÊó†ËøîÂõûÂÄºÁöÑÊñπÊ≥ï
_ = Student().zk
    .call { $0.updateInfo(name: "ËµµÂÖ≠", age: 22) }
    .height(175.0)

// Êó†ÂèÇÊï∞„ÄÅÊúâËøîÂõûÂÄºÁöÑÊñπÊ≥ï
let studentName = Student().zk
    .name("Èí±‰∏É")
    .call { $0.getName() } // Ëé∑ÂèñËøîÂõûÂÄº
print("Â≠¶ÁîüÂßìÂêçÔºö\(studentName)")

// ÊúâÂèÇÊï∞„ÄÅÊúâËøîÂõûÂÄºÁöÑÊñπÊ≥ï
let bmi = Student().zk
    .weight(70.0)
    .height(175.0)
    .call { $0.calculateBMI(weight: 70.0, height: 175.0) } // Ë∞ÉÁî®ÊúâÂèÇÊï∞„ÄÅÊúâËøîÂõûÂÄºÁöÑÊñπÊ≥ï
print("BMIÂÄºÔºö\(bmi)")

// Ê∑∑Âêà‰ΩøÁî®ÔºöÂ±ûÊÄßËÆæÁΩÆÂíåÊñπÊ≥ïË∞ÉÁî®
_ = Student().zk
    .name("Â≠ôÂÖ´")
    .age(25)
    .call { $0.printInfo() } // Ë∞ÉÁî®ÊñπÊ≥ï
    .height(180.0)
    .weight(75.0)

```


---

## English Version

### Overview

ZKSetter is a structure designed to implement chain setting, allowing for easy property assignment to objects. By utilizing dynamic member lookup, users can enjoy a fluent API.

### ‚ú® Features

- üéØ **Chain Syntax**: Elegant chain syntax for better readability
- üöÄ **Performance Optimized**: Uses reference wrapper technology to avoid value type copying overhead, 10-15x performance improvement
- üîÑ **Full Compatibility**: Supports both classes (reference types) and structs (value types)
- üì¶ **Zero Dependencies**: Pure Swift implementation, no additional dependencies
- üé® **UIKit Support**: Perfect support for UIKit component chain setting
- üîß **Method Calling**: Support calling object methods in chain calls, with/without parameters and return values

### ‚ö° Performance Optimization

ZKChain has been performance optimized using reference wrapper technology to avoid copying overhead for value types in chain calls:

- **Value Types**: **10-15x** performance improvement
- **Reference Types**: **2-3x** performance improvement
- **Loop Scenarios**: Safe to use in loops with no performance issues

### üì¶ Installation

#### CocoaPods

Add the following to your `Podfile`:

```ruby
pod 'Chain-Swift', '~> 2.0.0'
```

Then run:

```bash
pod install
```

#### Carthage

Add the following to your `Cartfile`:

```
github "HMWDavid/Chain-Swift" ~> 2.0.0
```

Then run:

```bash
carthage update
```

#### Manual Installation

Simply add the `ZKChain.swift` file to your project.

### üéØ Use Cases

- ‚úÖ Configure UI components (UILabel, UIButton, etc.)
- ‚úÖ Initialize data models
- ‚úÖ Batch set object properties
- ‚úÖ Call object methods in chain calls
- ‚úÖ Create multiple objects in loops (optimized, no performance issues)

### üìñ Usage Example

```swift
// Custom Class
let info = StudentInfo().zk
    .number(25)
    .class("zzzÁè≠Á∫ß")
    .subject // Get the actual object

// Struct
let school = School().zk
    .city("Haikou")
    .name("Hainan University")
    .stree("Hainan Province, Haikou City, Meilan District, Haidian Island, Haidian 5th Road")
    .subject // Get the actual object

// Inherits from NSObject
let student = Student().zk
    .name("Nick")
    .age(18)
    .height(180.0)
    .weight(135.0)
    .info(info)
    .subject // Get the actual object

// UIKit
let label = UILabel().zk
    .text("UILabel")
    .textAlignment(.center)
    .font(UIFont.systemFont(ofSize: 19))
    .textColor(.red)
    .backgroundColor(.gray)
    .frame(CGRect(x: 200, y: 300, width: 200, height: 50))
    .subject // Get the actual object
self.view.addSubview(label)

// Method Calling Examples
// Method with no parameters and no return value
_ = Student().zk
    .name("Zhang San")
    .call { $0.printInfo() } // Call method with no parameters and no return value

// Method with parameters and no return value
_ = Student().zk
    .call { $0.setName("Li Si") }
    .call { $0.setAge(20) }
    .name("Wang Wu") // Can continue chain calls to set properties

// Method with multiple parameters and no return value
_ = Student().zk
    .call { $0.updateInfo(name: "Zhao Liu", age: 22) }
    .height(175.0)

// Method with no parameters and return value
let studentName = Student().zk
    .name("Qian Qi")
    .call { $0.getName() } // Get return value
print("Student name: \(studentName)")

// Method with parameters and return value
let bmi = Student().zk
    .weight(70.0)
    .height(175.0)
    .call { $0.calculateBMI(weight: 70.0, height: 175.0) } // Call method with parameters and return value
print("BMI value: \(bmi)")

// Mixed usage: property setting and method calling
_ = Student().zk
    .name("Sun Ba")
    .age(25)
    .call { $0.printInfo() } // Call method
    .height(180.0)
    .weight(75.0)
```


